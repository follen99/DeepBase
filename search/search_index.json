{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"DeepBase","text":"<p>DeepBase \u00e8 un tool CLI che analizza una directory di progetto, estrae la struttura delle cartelle e il contenuto dei file di codice significativi, consolidandoli in un unico file di contesto per LLM.</p>"},{"location":"#versione-corrente-181","title":"Versione corrente: 1.8.1","text":""},{"location":"#quick-start","title":"\ud83d\ude80 Quick Start","text":"<pre><code>pip install deepbase\n\n# Analisi base (struttura solo)\ndeepbase /path/to/project\n\n# Modalit\u00e0 Light (risparmio token)\ndeepbase /path/to/project --light\n\n# Contenuto completo\ndeepbase /path/to/project --all\n\n# Focus su file specifici\ndeepbase /path/to/project --light --focus \"src/main.py\" --focus \"config.yaml\"\n</code></pre>"},{"location":"#documentazione-completa","title":"\ud83d\udcd6 Documentazione completa","text":"<ul> <li>Installazione</li> <li>Modalit\u00e0 di funzionamento</li> <li>Configurazione <code>.deepbase.toml</code></li> <li>Database SQLite</li> <li>Parser e linguaggi supportati</li> <li>API Reference</li> </ul>"},{"location":"#installazione","title":"Installazione","text":""},{"location":"#come-installare-deepbase","title":"Come installare DeepBase","text":"<pre><code>pip install deepbase\n</code></pre>"},{"location":"#modalita-di-sviluppo","title":"Modalit\u00e0 di sviluppo","text":"<pre><code>git clone https://github.com/follen99/deepbase.git\ncd deepbase\npip install -e \".[dev]\"\n</code></pre>"},{"location":"#modalita-di-funzionamento","title":"Modalit\u00e0 di funzionamento","text":""},{"location":"#default-struttura-solo","title":"Default (Struttura solo)","text":"<p>Genera solo l'albero delle directory, senza contenuto dei file.</p> <pre><code>deepbase .\n</code></pre>"},{"location":"#-all-contenuto-completo","title":"<code>--all</code> - Contenuto completo","text":"<p>Include il contenuto completo di tutti i file significativi.</p> <p>\u26a0\ufe0f Usare solo per progetti piccoli (rischio di file troppo grandi per gli LLM).</p> <pre><code>deepbase . --all\n</code></pre>"},{"location":"#-light-modalita-light-consigliata","title":"<code>--light</code> - Modalit\u00e0 Light (consigliata)","text":"<p>Estrae solo le \"firme\" semantiche: classi, funzioni, docstring, commenti iniziali. Risparmia fino al 90% dei token mantenendo la comprensione dell'architettura.</p> <pre><code>deepbase . --light\n</code></pre>"},{"location":"#-focus-hybrid-mode","title":"<code>--focus</code> - Hybrid Mode","text":"<p>Combina Light mode per l'intero progetto con contenuto completo per file specifici.</p> <pre><code># Via CLI\ndeepbase . --light --focus \"server/controllers/*\" --focus \"client/src/login.js\"\n\n# Via file\ndeepbase . --light --focus-file context_task.txt\n</code></pre>"},{"location":"#configurazione","title":"Configurazione","text":"<p>Crea un file <code>.deepbase.toml</code> nella root del progetto:</p> <pre><code># Directory da ignorare (nomi, percorsi relativi, wildcard)\nignore_dirs = [\n    \"node_modules\",           # ignora ovunque\n    \"app/templates\",          # ignora solo app/templates\n    \"*.egg-info\",             # ignora tutte le cartelle .egg-info\n    \"temp_*\"                  # ignora temp_1, temp_2, etc.\n]\n\n# File da ignorare (nomi, percorsi, wildcard)\nignore_files = [\n    \"*.log\",                  # tutti i file .log\n    \"secrets.env\",            # file specifico\n    \"app/config.local.py\",    # percorso specifico\n    \".env*\"                   # .env, .env.local, etc.\n]\n\n# Estensioni aggiuntive da includere\nsignificant_extensions = [\".cfg\", \"Makefile\", \".prisma\"]\n</code></pre>"},{"location":"#pattern-di-esclusione","title":"Pattern di esclusione","text":"Pattern Esempio Comportamento Nome semplice <code>\"tests\"</code> Ignora TUTTE le cartelle/file chiamati \"tests\" a qualsiasi livello Percorso relativo <code>\"app/templates\"</code> Ignora SOLO la cartella templates dentro app Wildcard <code>\"*.egg-info\"</code> Ignora tutti i match del pattern"},{"location":"#database","title":"Database","text":"<p>DeepBase supporta l'analisi di database SQLite:</p> <pre><code># Schema completo\ndeepbase database.db --all\n\n# Schema light (solo struttura)\ndeepbase database.db --light\n\n# Focus su tabelle specifiche\ndeepbase database.db --light --focus \"users\" --focus \"orders\"\n</code></pre>"},{"location":"#parser","title":"Parser","text":"<p>Supporto nativo per:</p> Linguaggio Estensioni Modalit\u00e0 Light Python <code>.py</code> \u2705 Firme, type hints, docstring JavaScript/TypeScript <code>.js</code>, <code>.jsx</code>, <code>.ts</code>, <code>.tsx</code> \u2705 Funzioni, classi, componenti React Markdown <code>.md</code>, <code>.markdown</code> \u2705 Headers, struttura LaTeX <code>.tex</code>, <code>.sty</code>, <code>.cls</code> \u2705 Sezioni, comandi JSON <code>.json</code> \u2705 Struttura dati SQLite <code>.db</code>, <code>.sqlite</code> \u2705 Schema, tabelle, relazioni Altri <code>*</code> \u26a0\ufe0f Fallback (prime 10 righe)"},{"location":"#esempi","title":"Esempi","text":""},{"location":"#esempio-1-progetto-python-flask","title":"Esempio 1: Progetto Python Flask","text":"<pre><code>cd my-flask-app\ndeepbase . --light --focus \"app/routes.py\" --focus \"app/models.py\"\n</code></pre>"},{"location":"#esempio-2-progetto-react","title":"Esempio 2: Progetto React","text":"<pre><code># .deepbase.toml\nignore_dirs = [\"node_modules\", \"build\", \"dist\", \"coverage\"]\nignore_files = [\"package-lock.json\", \"*.log\"]\n</code></pre> <pre><code>deepbase . --light\n</code></pre>"},{"location":"#esempio-3-analisi-database-codice","title":"Esempio 3: Analisi database + codice","text":"<pre><code>deepbase . --light --focus \"instance/app.db\"\n</code></pre>"},{"location":"#troubleshooting","title":"Troubleshooting","text":""},{"location":"#il-file-deepbasetoml-non-viene-rilevato","title":"Il file <code>.deepbase.toml</code> non viene rilevato","text":"<p>Verifica che: 1. Il file sia nella root del progetto da analizzare, non della directory corrente 2. Il nome sia esatto: <code>.deepbase.toml</code> (con il punto iniziale) 3. I permessi siano corretti: <code>ls -la .deepbase.toml</code></p>"},{"location":"#file-troppo-grande-per-lllm","title":"File troppo grande per l'LLM","text":"<p>Usa <code>--light</code> o aumenta gli esclusioni nel TOML.</p>"},{"location":"#contributing","title":"Contributing","text":"<p>Issue e PR su GitHub.</p>"},{"location":"#license","title":"License","text":"<p>GPL 3</p>"},{"location":"CHANGELOG/","title":"Changelog","text":""},{"location":"CHANGELOG/#170-2024-02-12","title":"[1.7.0] - 2024-02-12","text":""},{"location":"CHANGELOG/#added","title":"Added","text":"<ul> <li>Smart Token Estimation: Added approximate token count (~4 chars/token) and file size percentage next to every file and folder in the tree view.</li> <li>Recursive Directory Stats: Parent folders now show the cumulative size and token count of their contents.</li> <li>Enhanced Tree Visualization: Replaced simple indentation with proper ASCII tree branches (<code>\u251c\u2500\u2500</code>, <code>\u2514\u2500\u2500</code>, <code>\u2502</code>) for better readability.</li> <li>CLI Links: Added links to Documentation, Repository, and Issues in the <code>--help</code> output.</li> </ul>"},{"location":"CHANGELOG/#changed","title":"Changed","text":"<ul> <li>React/JS Optimization: Automatically ignores <code>package-lock.json</code>, <code>yarn.lock</code>, <code>pnpm-lock.yaml</code>, and mobile build folders (<code>ios/</code>, <code>android/</code>) to save tokens.</li> <li>Self-Exclusion Logic: DeepBase now strictly ignores any existing file named <code>llm_context.md</code> (or the specified output name) in the target directory to prevent data duplication.</li> </ul>"},{"location":"CHANGELOG/#fixed","title":"Fixed","text":"<ul> <li>Fixed an issue where previous context files were included in the analysis, doubling the token count.</li> </ul>"},{"location":"configuration/","title":"Configurazione avanzata","text":""},{"location":"configuration/#file-deepbasetoml","title":"File <code>.deepbase.toml</code>","text":"<p>Posizionare nella root del progetto da analizzare il file <code>.deepbase.toml</code>, verr\u00e0 riconosciuto automaticamente.</p>"},{"location":"configuration/#esempio-di-file","title":"Esempio di file","text":"<pre><code># Esempio di file di configurazione per DeepBase.\n# Salva questo file come .deepbase.toml nella root del tuo progetto.\n\n# Aggiungi altre directory da ignorare.\n# Queste si sommeranno a quelle di default.\n ignore_dirs = [\n   \"my_secret_folder\",\n   \"temp_data\"\n ]\n\n# Aggiungi altri files da ignorare.\n# Questi si sommeranno a quelle di default.\n ignore_files = [\n   \"secrets.txt\"\n ]\n\n# Aggiungi altre estensioni o nomi di file da includere.\n significant_extensions = [\n   \".env.example\",\n   \".customtext\"\n ]\n</code></pre>"},{"location":"examples/","title":"Esempi pratici","text":"<p>Questa pagina contiene esempi reali d'uso di DeepBase per diversi scenari e tipologie di progetto.</p>"},{"location":"examples/#esempio-1-progetto-python-flask","title":"\ud83d\udcc1 Esempio 1: Progetto Python Flask","text":"<p>Struttura progetto:</p> <pre><code>my-flask-app/\n\u251c\u2500\u2500 app/\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u251c\u2500\u2500 routes.py          # &lt;- focus qui\n\u2502   \u251c\u2500\u2500 models.py          # &lt;- focus qui\n\u2502   \u251c\u2500\u2500 forms.py\n\u2502   \u251c\u2500\u2500 templates/         # &lt;- da ignorare\n\u2502   \u2514\u2500\u2500 static/\n\u251c\u2500\u2500 config.py\n\u251c\u2500\u2500 requirements.txt\n\u251c\u2500\u2500 tests/                   # &lt;- da ignorare\n\u2514\u2500\u2500 instance/\n    \u2514\u2500\u2500 app.db               # &lt;- database\n</code></pre> <p>Configurazione <code>.deepbase.toml</code>:</p> <pre><code>ignore_dirs = [\"app/templates\", \"tests\", \"instance\", \"__pycache__\"]\nignore_files = [\"*.pyc\", \".env\", \".flaskenv\"]\n</code></pre> <p>Comando:</p> <pre><code>deepbase . --light --focus \"app/routes.py\" --focus \"app/models.py\"\n</code></pre> <p>Output: Struttura light dell'intero progetto + contenuto completo di routes e models.</p>"},{"location":"examples/#esempio-2-progetto-react-nodejs","title":"\ud83d\udcc1 Esempio 2: Progetto React + Node.js","text":"<p>Struttura progetto:</p> <pre><code>my-react-app/\n\u251c\u2500\u2500 src/\n\u2502   \u251c\u2500\u2500 components/\n\u2502   \u2502   \u251c\u2500\u2500 Button.jsx\n\u2502   \u2502   \u2514\u2500\u2500 Card.jsx\n\u2502   \u251c\u2500\u2500 pages/\n\u2502   \u2502   \u251c\u2500\u2500 Home.jsx       # &lt;- focus qui\n\u2502   \u2502   \u2514\u2500\u2500 Dashboard.jsx  # &lt;- focus qui\n\u2502   \u2514\u2500\u2500 utils/\n\u2502       \u2514\u2500\u2500 api.js\n\u251c\u2500\u2500 public/\n\u251c\u2500\u2500 node_modules/            # &lt;- da ignorare\n\u251c\u2500\u2500 build/                   # &lt;- da ignorare\n\u251c\u2500\u2500 package.json\n\u2514\u2500\u2500 package-lock.json        # &lt;- da ignorare\n</code></pre> <p>Configurazione <code>.deepbase.toml</code>:</p> <pre><code>ignore_dirs = [\"node_modules\", \"build\", \"dist\", \"coverage\", \".next\"]\nignore_files = [\"package-lock.json\", \"yarn.lock\", \"*.log\"]\n</code></pre> <p>Comando:</p> <pre><code>deepbase . --light --focus \"src/pages/*\"\n</code></pre>"},{"location":"examples/#esempio-3-analisi-database-sqlite","title":"\ud83d\udcc1 Esempio 3: Analisi Database SQLite","text":"<p>Scenario: Vuoi documentare lo schema del database + alcune query importanti.</p> <p>Struttura:</p> <pre><code>data-project/\n\u251c\u2500\u2500 migrations/\n\u2502   \u251c\u2500\u2500 001_initial.sql    # &lt;- focus qui\n\u2502   \u2514\u2500\u2500 002_add_users.sql  # &lt;- focus qui\n\u251c\u2500\u2500 queries/\n\u2502   \u251c\u2500\u2500 reports.sql        # &lt;- focus qui\n\u2502   \u2514\u2500\u2500 analytics.sql\n\u2514\u2500\u2500 production.db          # &lt;- database da analizzare\n</code></pre> <p>Configurazione <code>.deepbase.toml</code>:</p> <pre><code>ignore_dirs = [\"backups\", \"temp\"]\nsignificant_extensions = [\".sql\", \".db\", \".sqlite\"]\n</code></pre> <p>Comando:</p> <pre><code>deepbase . --light --focus \"production.db\" --focus \"migrations/*\" --focus \"queries/reports.sql\"\n</code></pre> <p>Output: Schema completo del database + contenuto SQL dei file focalizzati.</p>"},{"location":"examples/#esempio-4-monorepo-con-piu-package","title":"\ud83d\udcc1 Esempio 4: Monorepo con pi\u00f9 package","text":"<p>Struttura:</p> <pre><code>monorepo/\n\u251c\u2500\u2500 packages/\n\u2502   \u251c\u2500\u2500 core/\n\u2502   \u2502   \u251c\u2500\u2500 src/\n\u2502   \u2502   \u2514\u2500\u2500 package.json\n\u2502   \u251c\u2500\u2500 ui/                  # &lt;- focus solo questo\n\u2502   \u2502   \u251c\u2500\u2500 src/\n\u2502   \u2502   \u2514\u2500\u2500 package.json\n\u2502   \u2514\u2500\u2500 utils/\n\u2502       \u2514\u2500\u2500 src/\n\u251c\u2500\u2500 apps/\n\u2502   \u251c\u2500\u2500 web/\n\u2502   \u2514\u2500\u2500 admin/\n\u2514\u2500\u2500 turbo.json\n</code></pre> <p>Comando:</p> <pre><code>deepbase . --light --focus \"packages/ui/**/*\"\n</code></pre>"},{"location":"examples/#esempio-5-documentazione-latex","title":"\ud83d\udcc1 Esempio 5: Documentazione LaTeX","text":"<p>Struttura:</p> <pre><code>thesis/\n\u251c\u2500\u2500 chapters/\n\u2502   \u251c\u2500\u2500 introduction.tex\n\u2502   \u251c\u2500\u2500 methods.tex          # &lt;- focus qui\n\u2502   \u251c\u2500\u2500 results.tex          # &lt;- focus qui\n\u2502   \u2514\u2500\u2500 conclusion.tex\n\u251c\u2500\u2500 figures/\n\u251c\u2500\u2500 bibliography.bib\n\u2514\u2500\u2500 main.tex\n</code></pre> <p>Comando:</p> <pre><code>deepbase . --light --focus \"chapters/methods.tex\" --focus \"chapters/results.tex\"\n</code></pre>"},{"location":"examples/#esempio-6-configurazione-granulare-esclusioni-complesse","title":"\ud83d\udcc1 Esempio 6: Configurazione granulare (esclusioni complesse)","text":"<p>Scenario: Progetto con molti file temporanei e configurazioni locali.</p> <p><code>.deepbase.toml</code>:</p> <pre><code># Directory\nignore_dirs = [\n    \"node_modules\",\n    \"__pycache__\",\n    \".pytest_cache\",\n    \"dist\",\n    \"build\",\n    \"coverage\",\n    \".tox\",\n    # Esclusioni specifiche per percorso\n    \"legacy/old_components\",      # solo questa specifica\n    \"experiments/temp_*\",         # tutte le cartelle temp_*\n    \"src/components/__dev__\"      # cartella dev interna\n]\n\n# File\nignore_files = [\n    \"*.log\",\n    \"*.tmp\",\n    \"*.bak\",\n    \".env*\",\n    \"local.settings.json\",\n    \"secrets.*\",\n    # Esclusioni specifiche per percorso\n    \"config/local.yaml\",\n    \"src/debug_utils.py\"\n]\n\n# Estensioni extra\nsignificant_extensions = [\".prisma\", \".graphql\", \".proto\"]\n</code></pre> <p>Comando:</p> <pre><code>deepbase . --light\n</code></pre>"},{"location":"examples/#esempio-7-focus-da-file-esterno","title":"\ud83d\udcc1 Esempio 7: Focus da file esterno","text":"<p>Scenario: Hai una lista lunga di file da analizzare.</p> <p>File <code>focus-list.txt</code>:</p> <pre><code>src/auth/login.js\nsrc/auth/register.js\nsrc/middleware/jwt.js\nconfig/auth.yaml\ntests/auth.test.js\n</code></pre> <p>Comando:</p> <pre><code>deepbase . --light --focus-file focus-list.txt\n</code></pre>"},{"location":"examples/#esempio-8-cicd-generazione-automatica-contesto","title":"\ud83d\udcc1 Esempio 8: CI/CD - Generazione automatica contesto","text":"<p>Scenario: Generare contesto per PR review automatica.</p> <p>Script <code>.github/workflows/context.yml</code>:</p> <pre><code>name: Generate LLM Context\n\non:\n  pull_request:\n    paths:\n      - 'src/**'\n\njobs:\n  context:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v3\n\n      - name: Install DeepBase\n        run: pip install deepbase\n\n      - name: Generate context\n        run: |\n          deepbase . --light --focus \"src/**\" -o pr-context.md\n\n      - name: Upload artifact\n        uses: actions/upload-artifact@v3\n        with:\n          name: llm-context\n          path: pr-context.md\n</code></pre>"},{"location":"examples/#esempio-9-confronto-tra-versioni","title":"\ud83d\udcc1 Esempio 9: Confronto tra versioni","text":"<p>Scenario: Hai due branch e vuoi confrontare le differenze di struttura.</p> <pre><code># Branch main\ngit checkout main\ndeepbase . --light -o context-main.md\n\n# Branch feature\ngit checkout feature-branch\ndeepbase . --light -o context-feature.md\n\n# Ora confronta i due file con diff o LLM\ndiff context-main.md context-feature.md\n</code></pre>"},{"location":"examples/#esempio-10-progetto-complesso-multi-linguaggio","title":"\ud83d\udcc1 Esempio 10: Progetto complesso multi-linguaggio","text":"<p>Struttura:</p> <pre><code>fullstack-app/\n\u251c\u2500\u2500 backend/\n\u2502   \u251c\u2500\u2500 src/\n\u2502   \u2502   \u251c\u2500\u2500 controllers/     # Python\n\u2502   \u2502   \u251c\u2500\u2500 models/          # Python\n\u2502   \u2502   \u2514\u2500\u2500 main.py\n\u2502   \u251c\u2500\u2500 migrations/          # SQL\n\u2502   \u2514\u2500\u2500 requirements.txt\n\u251c\u2500\u2500 frontend/\n\u2502   \u251c\u2500\u2500 src/\n\u2502   \u2502   \u251c\u2500\u2500 components/      # React/TS\n\u2502   \u2502   \u2514\u2500\u2500 pages/\n\u2502   \u2514\u2500\u2500 package.json\n\u251c\u2500\u2500 mobile/\n\u2502   \u2514\u2500\u2500 ios/                 # &lt;- da ignorare (build)\n\u251c\u2500\u2500 shared/\n\u2502   \u2514\u2500\u2500 types.ts             # &lt;- focus qui (tipi condivisi)\n\u2514\u2500\u2500 README.md\n</code></pre> <p><code>.deepbase.toml</code>:</p> <pre><code>ignore_dirs = [\n    \"backend/__pycache__\",\n    \"frontend/node_modules\",\n    \"mobile/ios\",\n    \"mobile/android\",\n    \"mobile/build\"\n]\n\nignore_files = [\n    \"frontend/package-lock.json\",\n    \"backend/*.pyc\"\n]\n</code></pre> <p>Comando:</p> <pre><code>deepbase . --light --focus \"backend/src/main.py\" --focus \"shared/types.ts\"\n</code></pre>"},{"location":"examples/#tips-tricks","title":"\ud83d\udca1 Tips &amp; Tricks","text":""},{"location":"examples/#verifica-cosa-verra-incluso","title":"Verifica cosa verr\u00e0 incluso","text":"<pre><code># Genera solo struttura (veloce, per controllare)\ndeepbase . &gt; structure.md\n\n# Poi aggiungi --light o --all quando sei soddisfatto\n</code></pre>"},{"location":"examples/#stima-token-prima-di-generare","title":"Stima token prima di generare","text":"<p>Guarda la stima nell'output dell'albero:</p> <pre><code>\ud83d\udcc1 my-project/ (245.6 KB | ~61.4k t)\n</code></pre> <p>Se troppo alto, aumenta le esclusioni nel TOML.</p>"},{"location":"examples/#ignorare-file-gia-nel-contesto","title":"Ignorare file gi\u00e0 nel contesto","text":"<p>DeepBase ignora automaticamente l'output file (<code>llm_context.md</code> di default) per evitare loop.</p>"},{"location":"examples/#usa-con-pipe","title":"Usa con pipe","text":"<pre><code>deepbase . --light | head -n 100  # prime 100 righe\ndeepbase . --light | wc -l        # conta righe\n</code></pre> <p>Hai un caso d'uso particolare? Apri una issue per aggiungerlo agli esempi!</p>"},{"location":"installation/","title":"Installazione","text":""},{"location":"installation/#installazione","title":"Installazione","text":""},{"location":"installation/#come-installare-deepbase","title":"Come installare DeepBase","text":"<pre><code>pip install deepbase\n</code></pre>"},{"location":"installation/#modalita-di-sviluppo","title":"Modalit\u00e0 di sviluppo","text":"<pre><code>git clone https://github.com/follen99/deepbase.git\ncd deepbase\npip install -e \".[dev]\"\n</code></pre>"},{"location":"reference/","title":"API Reference","text":""},{"location":"reference/#main-module","title":"Main Module","text":""},{"location":"reference/#deepbase.main.load_config","title":"<code>load_config(root_dir)</code>","text":"<p>Carica la configurazione dal file .deepbase.toml. Ritorna: (config, toml_found, user_ignore_dirs, user_ignore_files)</p> Source code in <code>src/deepbase/main.py</code> <pre><code>def load_config(root_dir: str) -&gt; Tuple[Dict[str, Any], bool, List[str], List[str]]:\n    \"\"\"\n    Carica la configurazione dal file .deepbase.toml.\n    Ritorna: (config, toml_found, user_ignore_dirs, user_ignore_files)\n    \"\"\"\n    config_path = os.path.join(root_dir, \".deepbase.toml\")\n    config = DEFAULT_CONFIG.copy()\n    config[\"ignore_dirs\"] = set(config[\"ignore_dirs\"])\n    config[\"ignore_files\"] = set(config[\"ignore_files\"])\n    config[\"significant_extensions\"] = set(config[\"significant_extensions\"])\n\n    toml_found = False\n    user_ignore_dirs = []\n    user_ignore_files = []\n\n    # DEBUG: stampa dove stiamo cercando\n    console.print(f\"[dim]  Looking for config at: {config_path}[/dim]\")\n    console.print(f\"[dim]  Absolute path: {os.path.abspath(config_path)}[/dim]\")\n    console.print(f\"[dim]  File exists: {os.path.exists(config_path)}[/dim]\")\n\n    if os.path.exists(config_path):\n        toml_found = True\n        try:\n            with open(config_path, \"rb\") as f:\n                user_config = tomli.load(f)\n\n            # Salva le configurazioni utente prima di mergiarle\n            user_dirs = user_config.get(\"ignore_dirs\", [])\n            user_files = user_config.get(\"ignore_files\", [])\n            user_ignore_dirs.extend(user_dirs)\n            user_ignore_files.extend(user_files)\n\n            # Merge con i default\n            config[\"ignore_dirs\"].update(user_dirs)\n            config[\"ignore_files\"].update(user_files)\n            config[\"significant_extensions\"].update(user_config.get(\"significant_extensions\", []))\n\n        except tomli.TOMLDecodeError as e:\n            console.print(f\"[bold yellow]Warning:[/bold yellow] Error parsing '.deepbase.toml': {e}\")\n\n    return config, toml_found, user_ignore_dirs, user_ignore_files\n</code></pre>"},{"location":"reference/#deepbase.main.main","title":"<code>main(target=typer.Argument(None, help='The file or directory to scan.'), help=typer.Option(False, '--help', '-h', is_eager=True, help='Show this help message and exit.'), version=typer.Option(None, '--version', '-v', callback=version_callback, is_eager=True, help='Show version and exit.'), output=typer.Option('llm_context.md', '--output', '-o', help='The output file.'), verbose=typer.Option(False, '--verbose', '-V', help='Show detailed output.'), include_all=typer.Option(False, '--all', '-a', help='Include full content of ALL files.'), light_mode=typer.Option(False, '--light', '-l', help='Token-saving mode (signatures only).'), focus=typer.Option(None, '--focus', '-f', help='Pattern to focus on (repeatable).'), focus_file=typer.Option(None, '--focus-file', '-ff', help='Path to focus patterns file.'))</code>","text":"<p>Analyzes a directory OR a single file. Default: structure tree only.</p> Source code in <code>src/deepbase/main.py</code> <pre><code>def main(\n    target: str = typer.Argument(None, help=\"The file or directory to scan.\"),\n    help: bool = typer.Option(False, \"--help\", \"-h\", is_eager=True, help=\"Show this help message and exit.\"),\n    version: Optional[bool] = typer.Option(None, \"--version\", \"-v\", callback=version_callback, is_eager=True, help=\"Show version and exit.\"),\n    output: str = typer.Option(\"llm_context.md\", \"--output\", \"-o\", help=\"The output file.\"),\n    verbose: bool = typer.Option(False, \"--verbose\", \"-V\", help=\"Show detailed output.\"),\n    include_all: bool = typer.Option(False, \"--all\", \"-a\", help=\"Include full content of ALL files.\"),\n    light_mode: bool = typer.Option(False, \"--light\", \"-l\", help=\"Token-saving mode (signatures only).\"),\n    focus: Optional[List[str]] = typer.Option(None, \"--focus\", \"-f\", help=\"Pattern to focus on (repeatable).\"),\n    focus_file: Optional[str] = typer.Option(None, \"--focus-file\", \"-ff\", help=\"Path to focus patterns file.\")\n):\n    \"\"\"\n    Analyzes a directory OR a single file.\n    Default: structure tree only.\n    \"\"\"\n    # 1. Custom HELP Logic\n    if help or target is None:\n        console.print(Panel.fit(\n            \"[bold cyan]DeepBase[/bold cyan] \u2014 Consolidate project context for LLMs\\n\\n\"\n            \"[bold]Usage:[/bold] [green]deepbase[/green] [OPTIONS] [TARGET]\\n\\n\"\n            \"[bold]Arguments:[/bold]\\n\"\n            \"  [cyan]TARGET[/cyan]  The file or directory to scan  [dim][default: current dir][/dim]\\n\",\n            title=\"DeepBase v1.7.0\", border_style=\"cyan\"\n        ))\n\n        # Options Table\n        options_table = Table(show_header=False, box=None, padding=(0, 2))\n        options_table.add_column(style=\"cyan\", no_wrap=True)\n        options_table.add_column(style=\"green\", no_wrap=True)\n        options_table.add_column()\n\n        options = [\n            (\"-v, --version\", \"\", \"Show version and exit\"),\n            (\"-o, --output\", \"TEXT\", \"Output file [dim][default: llm_context.md][/dim]\"),\n            (\"-V, --verbose\", \"\", \"Show detailed output\"),\n            (\"-a, --all\", \"\", \"Include full content of ALL files\"),\n            (\"-l, --light\", \"\", \"Token-saving mode (signatures only)\"),\n            (\"-f, --focus\", \"TEXT\", \"Pattern to focus on (repeatable)\"),\n            (\"-ff, --focus-file\", \"TEXT\", \"Path to focus patterns file\"),\n            (\"-h, --help\", \"\", \"Show this message and exit\"),\n        ]\n        for opt, meta, desc in options:\n            options_table.add_row(opt, meta, desc)\n\n        console.print(Panel(options_table, title=\"Options\", border_style=\"green\", title_align=\"left\"))\n\n        config_content = \"\"\"Create a [cyan].deepbase.toml[/cyan] in your project root:\n\n[dim]# Ignore additional directories (names or relative paths)[/dim]\n[yellow]ignore_dirs = [\"my_assets\", \"app/templates\", \"experimental\"][/yellow]\n\n[dim]# Ignore specific files (names, wildcards, or relative paths)[/dim]\n[yellow]ignore_files = [\"*.log\", \"secrets.env\", \"app/config/local.env\"][/yellow]\n\n[dim]# Add extra file extensions[/dim]\n[yellow]significant_extensions = [\".cfg\", \"Makefile\", \".tsx\"][/yellow]\"\"\"\n\n        console.print(Panel(\n            config_content,\n            title=\"Configuration (.deepbase.toml)\", \n            border_style=\"yellow\",\n            title_align=\"left\"\n        ))\n\n        links_table = Table(show_header=False, box=None, padding=(0, 2))\n        links_table.add_column(style=\"bold\")\n        links_table.add_column(style=\"blue\")\n\n        links_table.add_row(\"Documentation:\", \"https://follen99.github.io/DeepBase/\")\n        links_table.add_row(\"Repository:\", \"https://github.com/follen99/DeepBase\")\n        links_table.add_row(\"Issues:\", \"https://github.com/follen99/DeepBase/issues\")\n        links_table.add_row(\"PyPI:\", \"https://pypi.org/project/deepbase/\")\n\n        console.print(Panel(links_table, title=\"Links\", border_style=\"blue\", title_align=\"left\"))\n\n        raise typer.Exit()\n\n    # 2. Main Logic Start\n    if not os.path.exists(target):\n        console.print(f\"[bold red]Error:[/bold red] Target not found: '{target}'\")\n        raise typer.Exit(code=1)\n\n    abs_output_path = os.path.abspath(output)\n\n    active_focus_patterns = []\n    if focus: active_focus_patterns.extend(focus)\n    if focus_file:\n        file_patterns = load_focus_patterns_from_file(focus_file)\n        if file_patterns: active_focus_patterns.extend(file_patterns)\n    active_focus_patterns = list(set(active_focus_patterns))\n\n    mode_label = \"\"\n    if light_mode:\n        mode_label = \" [bold yellow](LIGHT \u2014 signatures only)[/bold yellow]\"\n    elif include_all:\n        mode_label = \" [bold cyan](ALL \u2014 full content)[/bold cyan]\"\n\n    # Carica configurazione e stampa info\n    if os.path.isdir(target):\n        config, toml_found, user_ignore_dirs, user_ignore_files = load_config(target)\n        print_config_info(toml_found, user_ignore_dirs, user_ignore_files)\n    else:\n        # Per singoli file, carica comunque la config dalla directory parent\n        parent_dir = os.path.dirname(os.path.abspath(target)) or \".\"\n        config, toml_found, user_ignore_dirs, user_ignore_files = load_config(parent_dir)\n        if toml_found:\n            print_config_info(toml_found, user_ignore_dirs, user_ignore_files)\n\n    console.print(f\"[bold green]Analyzing '{target}'...[/bold green]{mode_label}\")\n\n    if light_mode:\n        def fmt_header(title): return f\"### {title}\\n\\n\"\n        def fmt_file_start(path, icon=\"\"): return f\"&gt; FILE: {icon}{path}\\n\"\n        def fmt_file_end(path): return \"\\n\"\n        def fmt_separator(): return \"\"\n    else:\n        def fmt_header(title): return f\"{'='*80}\\n### {title} ###\\n{'='*80}\\n\\n\"\n        def fmt_file_start(path, icon=\"\"): return f\"--- START OF FILE: {icon}{path} ---\\n\\n\"\n        def fmt_file_end(path): return f\"\\n\\n--- END OF FILE: {path} ---\\n\"\n        def fmt_separator(): return \"-\" * 40 + \"\\n\\n\"\n\n    try:\n        with open(output, \"w\", encoding=\"utf-8\") as outfile:\n            # CASO 1: Singolo file\n            if os.path.isfile(target):\n                filename = os.path.basename(target)\n                is_db = is_sqlite_database(target)\n                outfile.write(f\"# Analysis: {filename}\\n\\n\")\n                if light_mode:\n                    outfile.write(LIGHT_MODE_NOTICE + \"\\n\")\n\n                if is_db:\n                    schema = get_database_schema(target)\n                    focused_tables = extract_focused_tables(target, active_focus_patterns)\n                    is_focused = bool(focused_tables) or (active_focus_patterns and any(\n                        fnmatch.fnmatch(filename, p) or p in filename for p in active_focus_patterns\n                    ))\n                    outfile.write(fmt_header(\"DATABASE SCHEMA\"))\n                    if light_mode and not is_focused:\n                        outfile.write(generate_light_representation(target, \"\"))\n                    elif focused_tables:\n                        outfile.write(generate_database_focused(target, focused_tables))\n                    else:\n                        outfile.write(generate_database_context_full(schema, filename))\n                else:\n                    content = read_file_content(target)\n                    structure = get_document_structure(target, content)\n                    outfile.write(fmt_header(\"STRUCTURE\"))\n                    outfile.write(structure or \"N/A\")\n                    outfile.write(\"\\n\\n\")\n                    outfile.write(fmt_header(\"CONTENT\"))\n                    outfile.write(fmt_file_start(filename))\n                    if light_mode:\n                        outfile.write(generate_light_representation(target, content))\n                    else:\n                        outfile.write(content)\n                    outfile.write(fmt_file_end(filename))\n\n            # CASO 2: Directory\n            elif os.path.isdir(target):\n                outfile.write(f\"# Project Context: {os.path.basename(os.path.abspath(target))}\\n\\n\")\n                if light_mode:\n                    outfile.write(LIGHT_MODE_NOTICE + \"\\n\")\n                outfile.write(fmt_header(\"PROJECT STRUCTURE\"))\n\n                tree_str, total_bytes, total_tokens = generate_directory_tree(target, config, abs_output_path, light_mode=light_mode)\n\n                if light_mode:\n                    outfile.write(f\"&gt; Total Size (raw): {total_bytes/1024:.2f} KB | Est. Tokens (light): ~{total_tokens:,}\\n\")\n                else:\n                    outfile.write(f\"&gt; Total Size: {total_bytes/1024:.2f} KB | Est. Tokens: ~{total_tokens:,}\\n\")\n\n                outfile.write(tree_str)\n                outfile.write(\"\\n\\n\")\n\n                if include_all or light_mode or active_focus_patterns:\n                    section_title = \"FILE CONTENTS\"\n                    if light_mode: section_title += \" (LIGHT \u2014 signatures only)\"\n                    outfile.write(fmt_header(section_title))\n                    files = get_all_significant_files(target, config, abs_output_path)\n\n                    with Progress(console=console) as progress:\n                        task = progress.add_task(\"[cyan]Processing...\", total=len(files))\n                        for fpath in files:\n                            rel_path = os.path.relpath(fpath, target).replace('\\\\', '/')\n                            is_db = is_sqlite_database(fpath)\n                            is_in_focus = active_focus_patterns and matches_focus(fpath, target, active_focus_patterns)\n                            focused_tables = []\n                            if is_db:\n                                focused_tables = extract_focused_tables(fpath, active_focus_patterns)\n                                if focused_tables: is_in_focus = True\n\n                            should_write_full = include_all or is_in_focus\n                            should_write_light = light_mode and not should_write_full\n\n                            if not should_write_full and not should_write_light:\n                                progress.update(task, advance=1)\n                                continue\n\n                            progress.update(task, advance=1, description=f\"[cyan]{rel_path}[/cyan]\")\n                            marker = \" [FOCUSED]\" if (is_in_focus and light_mode) else \"\"\n                            icon = \"\ud83d\uddc4\ufe0f \" if is_db else \"\"\n                            outfile.write(fmt_file_start(rel_path + marker, icon))\n\n                            if is_db:\n                                if should_write_full:\n                                    if focused_tables:\n                                        outfile.write(generate_database_focused(fpath, focused_tables))\n                                    else:\n                                        schema = get_database_schema(fpath)\n                                        outfile.write(generate_database_context_full(schema, os.path.basename(fpath)))\n                                else:\n                                    outfile.write(generate_light_representation(fpath, \"\"))\n                            else:\n                                content = read_file_content(fpath)\n                                if should_write_full:\n                                    outfile.write(content)\n                                elif should_write_light:\n                                    light_output = generate_light_representation(fpath, content)\n                                    outfile.write(light_output)\n\n                            outfile.write(fmt_file_end(rel_path))\n                            outfile.write(fmt_separator())\n                else:\n                    console.print(\"[dim]Directory tree generated. Use --light, --all, or --focus for content.[/dim]\")\n\n        console.print(f\"\\n[bold green]\u2714 SUCCESS[/bold green]: Context created in [cyan]'{output}'[/cyan]\")\n\n    except Exception as e:\n        console.print(f\"\\n[bold red]Error:[/bold red] {e}\")\n        raise typer.Exit(code=1)\n</code></pre>"},{"location":"reference/#deepbase.main.print_config_info","title":"<code>print_config_info(toml_found, user_ignore_dirs, user_ignore_files)</code>","text":"<p>Stampa informazioni sulla configurazione caricata.</p> Source code in <code>src/deepbase/main.py</code> <pre><code>def print_config_info(toml_found: bool, user_ignore_dirs: List[str], user_ignore_files: List[str]):\n    \"\"\"\n    Stampa informazioni sulla configurazione caricata.\n    \"\"\"\n    if toml_found:\n        console.print(f\"[bold green]\u2713[/bold green] Configuration file [cyan].deepbase.toml[/cyan] loaded\")\n\n        if user_ignore_dirs:\n            dirs_str = \", \".join(f\"[yellow]{d}[/yellow]\" for d in user_ignore_dirs)\n            console.print(f\"  [dim]Ignored directories:[/dim] {dirs_str}\")\n\n        if user_ignore_files:\n            files_str = \", \".join(f\"[yellow]{f}[/yellow]\" for f in user_ignore_files)\n            console.print(f\"  [dim]Ignored files:[/dim] {files_str}\")\n\n        if not user_ignore_dirs and not user_ignore_files:\n            console.print(\"  [dim]No custom ignore patterns defined[/dim]\")\n    else:\n        console.print(f\"[dim]\u2139 No .deepbase.toml found, using default configuration[/dim]\")\n        console.print(f\"  [dim]Default ignored directories: {len(DEFAULT_CONFIG['ignore_dirs'])} patterns[/dim]\")\n        console.print(f\"  [dim]Default ignored files: {len(DEFAULT_CONFIG['ignore_files'])} patterns[/dim]\")\n</code></pre>"}]}